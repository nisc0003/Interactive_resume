---
import Heading from "../components/Heading.astro";
import Text from "../components/Text.astro";
import { Image } from "astro:assets";
import Blue from "../assets/Star_blue.svg";
import Green from "../assets/star_green.svg";
import Yellow from "../assets/star_yellow.svg";
import Red from "../assets/star_red.svg";

const skills = [
  {
    title: "UX/UI Design",
    fullTitle: "UX/UI Design & Research",
    color: "bg-accent_yellow",
    starColor: Yellow,
    stars: 4,
    items: [
      "HTML, CSS & JavaScript",
      "Astro, Tailwind CSS & Alpine.js",
      "Responsivt & mobil-first design",
      "SEO-optimering & performance",
    ],
  },
  {
    title: "Frontend Udvikling",
    fullTitle: "Frontend Udvikling",
    color: "bg-accent_blue",
    starColor: Blue,
    stars: 5,
    items: [
      "Brugerresearch & usability testing",
      "Wireframing & prototyping (Figma)",
      "Designsystemer & style guides",
      "Design thinking processer",
      "Visuel identitet & branding",
    ],
  },
  {
    title: "Visuel Produktion",
    fullTitle: "Video, Foto & Adobe Creative Suite",
    color: "bg-accent_green",
    starColor: Green,
    stars: 3,
    items: [
      "Vektorillustration og grafisk design (Illustrator)",
      "Billedredigering og retouchering (Photoshop)",
      "Farvekorrigering og tonejustering (Lightroom)",
      "Videoredigering og klipning (Premiere Pro)",
      "Animation og motion graphics (After Effects)",
    ],
  },
  {
    title: "Lydproduktion",
    fullTitle: "Lydproduktion & Musikproduktion",
    color: "bg-accent_red",
    starColor: Red,
    stars: 5,
    items: [
      "FL Studio & Ableton Live",
      "Musikproduktion & komposition",
      "Lyddesign til digitale medier",
      "Lydeffekter til spil & animation",
    ],
  },
];
---

<div class="w-full max-w-5xl mx-auto px-4  ">
  <div class="flex flex-col gap-4">
    <Heading
      htmlheading="h2"
      type="section_heading"
      stylingclasses="text-text-white mb-2 px-0"
    >
      Kompetencer
    </Heading>

    {
      skills.map((skill, index) => (
        <article
          x-data="{ expanded: false }"
          class="intersect intersect:animate-fade-up animate-duration-600 animate-ease-out bg-bg1 rounded-lg overflow-hidden border border-white/8 hover:border-white/20 transition-all duration-300 group"
          style={`animation-delay: ${index * 80}ms;`}
        >
          <button
            @click="expanded = !expanded"
            :aria-expanded="expanded.toString()"
            class="w-full flex flex-col gap-3 text-left px-4 py-4 lg:px-6 lg:py-5 hover:bg-white/3 transition-colors duration-200"
          >
            <div class="flex items-start md:items-center justify-between gap-3 w-full">
              <div class="min-w-0 flex items-center gap-3">
                <div
                  class={`w-2.5 h-2.5 lg:w-3 lg:h-3 ${skill.color} rounded-full flex-shrink-0`}
                />
                <span class="text-text-white text-base lg:text-lg font-display2 leading-tight truncate">
                  {skill.title}
                </span>
              </div>

              <div class="flex items-center gap-2 flex-shrink-0">
                <div class="flex items-center gap-1">
                  {Array.from({ length: 5 }).map((_, i) => (
                    <Image
                      src={i < skill.stars ? skill.starColor : Blue}
                      alt="star"
                      width={16}
                      height={16}
                      class={`w-3.5 h-3.5 lg:w-4 lg:h-4 ${i < skill.stars ? "opacity-100" : "opacity-20"}`}
                    />
                  ))}
                </div>
                <span class="text-text-white/40 text-xs lg:text-sm font-sans flex-shrink-0">
                  {skill.stars}/5
                </span>

                
                <svg
                  aria-hidden="true"
                  class="ml-2 w-3.5 h-3.5 lg:w-4 lg:h-4 text-text-white/60 transform transition-transform duration-200"
                  :class="{ 'rotate-180': expanded }"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="6 9 12 15 18 9" />
                </svg>

                <span class="sr-only">Vis detaljer</span>
              </div>
            </div>
          </button>

          <div
            x-show="expanded"
            x-transition:enter="transition-all ease-out duration-400"
            x-transition:enter-start="opacity-0 max-h-0"
            x-transition:enter-end="opacity-100 max-h-[500px]"
            x-transition:leave="transition-all ease-in duration-300"
            x-transition:leave-start="opacity-100 max-h-[500px]"
            x-transition:leave-end="opacity-0 max-h-0"
            class="overflow-hidden"
          >
            <div class="px-4 lg:px-6 pb-4 lg:pb-5 pt-2">
              <div class="border-t border-white/8 pt-4">
                <Heading
                  htmlheading="h4"
                  type="card_heading"
                  font="display2"
                  stylingclasses="text-text-white/90 mb-3 text-sm lg:text-base"
                >
                  {skill.fullTitle}
                </Heading>

                <ul class="space-y-2.5 lg:space-y-3 mb-4">
                  {skill.items.map((item) => (
                    <li class="flex items-start gap-2.5">
                      <span
                        class={`w-1.5 h-1.5 ${skill.color} rounded-full flex-shrink-0 mt-1.5`}
                      />
                      <Text
                        teksttype="konsultativ"
                        stylingclasses="text-text-white/80 text-sm lg:text-sm my-0 leading-relaxed flex-1"
                      >
                        {item}
                      </Text>
                    </li>
                  ))}
                </ul>

                <div class="pt-3 border-t border-white/6">
                  <Text
                    teksttype="konsultativ"
                    stylingclasses="text-text-white/50 text-sm my-0 leading-relaxed"
                  >
                    {skill.stars === 5
                      ? "Meget erfaren gennem projekter og selvstændigt arbejde"
                      : skill.stars === 4
                        ? "Solid erfaring fra studiet og egne projekter"
                        : "Grundlæggende kendskab og praktisk erfaring"}
                  </Text>
                </div>
              </div>
            </div>
          </div>
        </article>
      ))
    }
  </div>
</div>
