---
import Mail from "../assets/Mail.svg";
import Paperclip from "../assets/Paperclip.svg";
import Phone from "../assets/Phone.svg";

const { variant = "primary" } = Astro.props;

const iconColors = {
  privateMail: "bg-accent_red",
  workMail: "bg-accent_yellow",
  call: "bg-accent_green",
  download: "bg-accent_blue",
};

const labels = {
  privateMail: "Privat Mail",
  workMail: "Studie Mail",
  call: "Telefon",
  download: "Download CV",
};

const hoverTexts = {
  privateMail: "nschou@hotmail.com",
  workMail: "nisc0003@stud.ek.dk",
  call: "61 66 11 26",
  download: "PDF ↓",
};
const animationDelays = {
  privateMail: "0ms",
  workMail: "100ms",
  call: "200ms",
  download: "300ms",
};
const animationMap = {
  privateMail: "intersect:animate-fade-up",
  workMail: "intersect:animate-fade-up",
  call: "intersect:animate-fade-up",
  download: "intersect:animate-fade-up",
};
---

<div
  class={`w-full intersect ${animationMap[variant] || "intersect:animate-fade-up"} animate-duration-500`}
  style={`animation-delay: ${animationDelays[variant] || "0ms"}`}
>
  {
    variant === "privateMail" && (
      <a
        href="mailto:nschou@hotmail.com"
        class="group relative w-full h-14 flex items-center justify-center rounded-xl transition-all duration-300 border border-white/20 text-white bg-bg2 hover:bg-white hover:text-bg1 hover:border-white overflow-hidden min-w-0"
        aria-label="Privat mail"
        title="nschou@hotmail.com"
      >
        <div
          class={`absolute left-3 z-10 w-10 h-10 rounded-full flex items-center justify-center ${iconColors[variant]} transition-transform duration-300 group-hover:scale-105`}
        >
          <img src={Mail.src} alt="Mail" class="w-4 h-4" />
        </div>

        <div class="relative flex items-center justify-center w-full ml-14 px-2 z-30 h-full">
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-100 group-hover:opacity-0 group-hover:translate-y-2 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] uppercase font-display1 tracking-wide whitespace-nowrap">
            {labels[variant]}
          </span>
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-0 translate-y-2 group-hover:translate-y-0 group-hover:opacity-100 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] font-display1 whitespace-nowrap overflow-hidden text-ellipsis max-w-full">
            {hoverTexts[variant]}
          </span>
        </div>
      </a>
    )
  }

  {
    variant === "workMail" && (
      <a
        href="mailto:nisc0003@stud.ek.dk"
        class="group relative w-full h-14 flex items-center justify-center rounded-xl transition-all duration-300 border border-white/20 text-white bg-bg2 hover:bg-white hover:text-bg1 hover:border-white overflow-hidden min-w-0"
        aria-label="Studie mail"
        title="nisc0003@stud.ek.dk"
      >
        <div
          class={`absolute left-3 z-10 w-10 h-10 rounded-full flex items-center justify-center ${iconColors[variant]} transition-transform duration-300 group-hover:scale-105`}
        >
          <img src={Mail.src} alt="Mail" class="w-4 h-4" />
        </div>

        <div class="relative flex items-center justify-center w-full ml-14 px-2 z-30 h-full">
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-100 group-hover:opacity-0 group-hover:translate-y-2 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] uppercase font-display1 tracking-wide whitespace-nowrap">
            {labels[variant]}
          </span>
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-0 translate-y-2 group-hover:translate-y-0 group-hover:opacity-100 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] font-display1 whitespace-nowrap overflow-hidden text-ellipsis max-w-full">
            {hoverTexts[variant]}
          </span>
        </div>
      </a>
    )
  }

  {
    variant === "call" && (
      <button
        id="callBtn"
        class="group relative w-full h-14 flex items-center justify-center rounded-xl transition-all duration-300 border border-white/20 text-white bg-bg2 hover:bg-white hover:text-bg1 hover:border-white overflow-hidden min-w-0"
        aria-label="Kopiér telefonnummer"
        title="Klik for at kopiere: 61661126"
      >
        <div
          class={`absolute left-3 z-10 w-10 h-10 rounded-full flex items-center justify-center ${iconColors[variant]} transition-transform duration-300 group-hover:scale-105`}
        >
          <img src={Phone.src} alt="Phone" class="w-4 h-4" />
        </div>

        <div class="relative flex items-center justify-center w-full ml-14 px-2 z-30 h-full">
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-100 group-hover:opacity-0 group-hover:translate-y-2 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] uppercase font-display1 tracking-wide whitespace-nowrap">
            {labels[variant]}
          </span>
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-0 translate-y-2 group-hover:translate-y-0 group-hover:opacity-100 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] font-display1 whitespace-nowrap">
            {hoverTexts[variant]}
          </span>
        </div>
      </button>
    )
  }

  {
    variant === "download" && (
      <a
        href="/fonts/Nicolaischou_cv.pdf"
        download="Nicolaischou_cv.pdf"
        class="group relative w-full h-14 flex items-center justify-center rounded-xl transition-all duration-300 border border-white/20 text-white bg-bg2 hover:bg-white hover:text-bg1 hover:border-white overflow-hidden min-w-0"
        aria-label="Download CV"
        title="Download CV som PDF"
      >
        <div
          class={`absolute left-3 z-10 w-10 h-10 rounded-full flex items-center justify-center ${iconColors[variant]} transition-transform duration-300 group-hover:scale-105`}
        >
          <img src={Paperclip.src} alt="Download" class="w-4 h-4" />
        </div>

        <div class="relative flex items-center justify-center w-full ml-14 px-2 z-30 h-full">
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-100 group-hover:opacity-0 group-hover:translate-y-2 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] uppercase font-display1 tracking-wide whitespace-nowrap">
            {labels[variant]}
          </span>
          <span class="absolute inset-0 flex items-center justify-center transition-all duration-300 opacity-0 translate-y-2 group-hover:translate-y-0 group-hover:opacity-100 text-[clamp(0.95rem,1.2vw,1.25rem)] md:text-[clamp(1rem,1vw,1.3rem)] font-display1 whitespace-nowrap">
            {hoverTexts[variant]}
          </span>
        </div>
      </a>
    )
  }
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const callBtn = document.querySelector("#callBtn");
    if (callBtn) {
      callBtn.addEventListener("click", () => {
        navigator.clipboard.writeText("61661126");

        const hoverText = callBtn.querySelector("span:last-child");
        if (hoverText) {
          const originalContent = hoverText.textContent;
          hoverText.textContent = "✓ Kopieret!";
          setTimeout(() => {
            hoverText.textContent = originalContent;
          }, 2000);
        }
      });
    }
  });
</script>
